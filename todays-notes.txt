# Clarifai Website âœï¸

*NOTE: npm package for clarifai is deprecated. uses fetch now*

create app â†’ app settings â†’ API key

the below is what npm does for us, but we did it ourselves â¬‡ï¸ :

possible errors:

- model does not exist â†’ app.models.predict
    - has changed to using model ID in app
- we want to use face detection model
    - 404 â†’ need to access the data in the response object properly
- PAT: personal access token â†’ security
- user id â†’ bottom of new app icon box
- app id â†’ name of app
- model id â†’ â€˜face-detectionâ€™ (OPTIONAL)
- *ğŸ’¡: callback function keyword in a function is data we can pass around in that function*
- ğŸ’¡: *you contain a bunch of functionality in a variable and pass that variable to another function, add more functionality and return that new variable into the next new variable.*
- we return a final variable with all the previous data
- we can return a variable that holds data in the body: keyword of an API req/res

NOTE: 

- input change fn â‡’ insert input change fn on parent component â†’ pass it to the <input> tag which receives the ability
- (function â‡’ parent component â‡’ child component html tag)
- Destructure props ({})
    - instead of props.onInputChange â†’ â†’ â†’ = ({onInputChange})

 

install clarifai â†’ npm install clarifai

ğŸŒ€ input â†’ we setState to take input and update with e.target.value

ğŸŒ€ button â†’ takes input value and sets imageUrl to be the input

ğŸŒ€ Image Component 

â†’ we pass the imageUrl data to itâ€™s children, 

â†’ children take the data and 

â†’ pass the data to the html image tag

ğŸš¨: app.models predicts a model onto the this.state.input

bounding box

â†’ we access the object until we get to bounding box. this gives us the face dimensions of each photo

```jsx
console.log(res.outputs[0].regions[0].region_info.bounding_box);
```

â†’ inside a function, we insert the bounding box dimensions

```jsx
calculateFaceLocation = (data) => {
	data.outputs[0].regions[0].region_info.bounding_box;
  };
```

â†’ then we call the function name in the fetch .then, etc

```jsx
.then((res) =>
        this.calculateFaceLocation(res)
      .catch((err) => console.log(err))
      );
```

ğŸŒ€ The calculateFaceLocation function

â†’ clarifaiFace â†’ dimensions

â†’ target the image dimensions that gets generated

â†’ width is assigned image.width (width of image entered)

â†’ height is assigned image.heigh (heigh of image entered)

â†’ we return

â†’ clarifaiFace variable which holds the dimensions

- we multiply left column by the width of image entered
- we multiply right row by height of image entered
- we subtract width by right column times width
- we subtract height by bottom row times height

## ğŸ§   The displayFaceBox function

â†’ we update the state of our bounding box

â†’ by passing in new data from calculateFaceLocation

â†’ the calculateFaceLocation does all the math

```jsx
 .then((res) =>
        this.displayFaceBox(
          this.calculateFaceLocation(res).catch((err) => console.log(err))
        )
      );
```

ğŸ¨  Bounding Box Dynamic Styling

we dynamically access the values within box which we imported/destructured from the parent which inherits the data from the app, set state, etc

```jsx
				<div 
					className="bounding-box" 
					style={{
            top: box.topRow,
            right: box.rightCol,
            bottom: box.bottomRow,
            left: box.leftCol,
          }}></div>
```

Tachyons Form + Product Card

â†’ the product card gives it more shape(i only added the article tag)

â†’ remove what you donâ€™t need

```jsx
 <article class="br2 ba dark-gray b--black-10 mv4 w-100 w-50-m w-25-l mw5 center">
      <main className="pa4 black-80">
        <form className="measure center">
          <fieldset id="sign_up" className="ba b--transparent ph0 mh0">
            <legend className="f4 fw6 ph0 mh0">Sign In</legend>
            <div className="mt3">
              <label className="db fw6 lh-copy f6" for="email-address">
                Email
              </label>
              <input
                className="pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100"
                type="email"
                name="email-address"
                id="email-address"
              />
            </div>
            <div className="mv3">
              <label className="db fw6 lh-copy f6" for="password">
                Password
              </label>
              <input
                className="b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100"
                type="password"
                name="password"
                id="password"
              />
            </div>
            <label className="pa0 ma0 lh-copy f6 pointer">
              <input type="checkbox" /> Remember me
            </label>
          </fieldset>

          <div className="">
            <input
              className="b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib"
              type="submit"
              value="Sign in"
            />
          </div>
          <div className="lh-copy mt3">
            <a href="#0" className="f6 link dim black db">
              Sign up
            </a>
            <a href="#0" className="f6 link dim black db">
              Forgot your password?
            </a>
          </div>
        </form>
      </main>
    </article>
```

sign in route when page first load, loads sign in component first

conditionally render components 

```jsx
{this.state.route === "signin" ? (
          <Signin />
        ) : (
          <div>
            <Logo />
            <Rank />
            <ImageLinkForm
              onInputChange={this.onInputChange}
              onButtonSubmit={this.onButtonSubmit}
            />
            <FaceRecognition
              box={this.state.box}
              imageUrl={this.state.imageUrl}
            />
          </div>
        )}
```

Changing Routes Dynamically â†’ 

â†’ onRouteChange function â†’ pass it to parent component of SignIn â†’ destructure it and pass to button of sign in. 

- when the user clicks sign in, it changes the route to home page

â†’ onSignOut function â†’ pass it to Navigation parent component â†’ destructure it into the child, accept it from parent and pass the onSignOut ability to the sign out text

Render Order: 

onClick={onRouteChange(â€™homeâ€™)} â€”> this will run it when app renders

onClick={() â‡’ onRouteChange(â€™homeâ€™)} â€”> will run when clicked on

Mult-Nested Conditional Rendering of Components:

â†’ if route is home â†’ show home components

â†’ if route is signin â†’ show sign in component

â†’ if route is register â†’ show register component

```jsx
{this.state.route === "home" ? (
          <div>
            <Logo />
            <Rank />
            <ImageLinkForm
              onInputChange={this.onInputChange}
              onButtonSubmit={this.onButtonSubmit}
            />
            <FaceRecognition
              box={this.state.box}
              imageUrl={this.state.imageUrl}
            />
          </div>
        ) : this.state.route === "signin" ? (
          <Signin onRouteChange={this.onRouteChange} />
        ) : (
          <Register onRouteChange={this.onRouteChange} />
        )}
```